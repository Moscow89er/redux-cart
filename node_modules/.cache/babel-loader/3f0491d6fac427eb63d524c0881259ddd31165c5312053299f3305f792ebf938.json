{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Batumi_89er/dev/redux-cart/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Batumi_89er/dev/redux-cart/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{uiActions}from\"./ui-slice\";import{cartActions}from\"./cart-slice\";export var fetchCartData=function fetchCartData(){var _ref;return function(_x){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var _ref2;var fetchData,cartData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:fetchData=function fetchData(){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://realtime-database-bcb64-default-rtdb.firebaseio.com/cart.json');case 2:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error('Could not fetch cart data!');case 5:_context.next=7;return response.json();case 7:data=_context.sent;return _context.abrupt(\"return\",data);case 9:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);};_context2.prev=1;_context2.next=4;return fetchData();case 4:cartData=_context2.sent;dispatch(cartActions.replaceCart({items:cartData.items||[],totalQuantity:cartData.totalQuantity}));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch(uiActions.showNotification({status:'error',title:'Error!',message:'Fetching cart data failed!'}));case 11:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);}))).apply(this,arguments);};};export var sendCartData=function sendCartData(cart){var _ref3;return function(_x2){return(_ref3=_ref3||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){var _ref4;var sendRequest;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:dispatch(uiActions.showNotification({status:'pending',title:'Sending...',message:'Sending cart data!'}));sendRequest=function sendRequest(){return(_ref4=_ref4||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch('https://realtime-database-bcb64-default-rtdb.firebaseio.com/cart.json',{method:'PUT',body:JSON.stringify({items:cart.items,totalQuantity:cart.totalQuantity})});case 2:response=_context3.sent;if(response.ok){_context3.next=5;break;}throw new Error('Sending cart data failed.');case 5:case\"end\":return _context3.stop();}},_callee3);}))).apply(this,arguments);};_context4.prev=2;_context4.next=5;return sendRequest();case 5:dispatch(uiActions.showNotification({status:'success',title:'Success!',message:'Sent cart data succesfully!'}));_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](2);dispatch(uiActions.showNotification({status:'error',title:'Error!',message:'Sending cart data failed!'}));case 11:case\"end\":return _context4.stop();}},_callee4,null,[[2,8]]);}))).apply(this,arguments);};};","map":{"version":3,"names":["uiActions","cartActions","fetchCartData","_ref","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","dispatch","_ref2","fetchData","cartData","wrap","_callee2$","_context2","prev","next","_callee","response","data","_callee$","_context","fetch","sent","ok","Error","json","abrupt","stop","apply","arguments","replaceCart","items","totalQuantity","t0","showNotification","status","title","message","sendCartData","cart","_ref3","_x2","_callee4","_ref4","sendRequest","_callee4$","_context4","_callee3","_callee3$","_context3","method","body","JSON","stringify"],"sources":["C:/Users/Batumi_89er/dev/redux-cart/src/store/cart-actions.js"],"sourcesContent":["import { uiActions } from \"./ui-slice\";\r\nimport { cartActions } from \"./cart-slice\";\r\n\r\nexport const fetchCartData = () => {\r\n    return async (dispatch) => {\r\n        const fetchData = async () => {\r\n            const response = await fetch(\r\n                'https://realtime-database-bcb64-default-rtdb.firebaseio.com/cart.json'\r\n            );\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Could not fetch cart data!');\r\n            }\r\n\r\n            const data = await response.json();\r\n\r\n            return data;\r\n        };\r\n\r\n        try {\r\n            const cartData = await fetchData();\r\n            dispatch(\r\n                cartActions.replaceCart({\r\n                    items: cartData.items || [],\r\n                    totalQuantity: cartData.totalQuantity\r\n                })\r\n            );\r\n        } catch (error) {\r\n            dispatch(\r\n                uiActions.showNotification({\r\n                    status: 'error',\r\n                    title: 'Error!',\r\n                    message: 'Fetching cart data failed!'\r\n                })\r\n            );\r\n        }\r\n    };\r\n};\r\n\r\nexport const sendCartData = (cart) => {\r\n    return async (dispatch) => {\r\n        dispatch(\r\n            uiActions.showNotification({\r\n              status: 'pending',\r\n              title: 'Sending...',\r\n              message: 'Sending cart data!'\r\n            })\r\n        );\r\n\r\n        const sendRequest = async () => {\r\n            const response = await fetch(\r\n                'https://realtime-database-bcb64-default-rtdb.firebaseio.com/cart.json',\r\n                {\r\n                    method: 'PUT',\r\n                    body: JSON.stringify(\r\n                        {\r\n                            items: cart.items,\r\n                            totalQuantity: cart.totalQuantity\r\n                        }\r\n                    )\r\n                }\r\n            );\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Sending cart data failed.');\r\n            }\r\n        };\r\n\r\n        try {\r\n            await sendRequest();\r\n\r\n            dispatch(\r\n                uiActions.showNotification({\r\n                  status: 'success',\r\n                  title: 'Success!',\r\n                  message: 'Sent cart data succesfully!'\r\n                })\r\n            );\r\n        } catch (error) {\r\n            dispatch(\r\n                uiActions.showNotification({\r\n                    status: 'error',\r\n                    title: 'Error!',\r\n                    message: 'Sending cart data failed!'\r\n                })\r\n            );\r\n        }\r\n    };\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}